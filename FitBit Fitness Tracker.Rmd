---
title: "Fit Bit Analysis"
author: "Pranatia Wisnu Heryuda"
date: '2022-05-20'
output: rmdformats::readthedown
---

```{r setup, include=FALSE}
# clean up the environment
rm(list = ls())

# setup chunk options
knitr::opts_chunk$set(
  message = FALSE,
  warning = FALSE,
  cache = TRUE,
  fig.align = "center",
  comment = "#>"
)

options(scipen = 9999)
```


<style>
body {
text-align: justify}
</style>


This analysis is made with scenario of a data scientist was assigned to assist a fitness technology unicorn, named "BugarBahagia", to improve their penetration to market by analyzing FitBit customer data.

# Preface {.tabset}
## Data Source and Goals

The dataset that i am using for this case study comes from open dataset: https://www.kaggle.com/datasets/arashnic/fitbit

It’s a public dataset, that was generated by respondents to a survey via Amazon Mechanical Turk. Thirty eligible Fitbit users consented to the submission of personal tracker data, including minute-level output for physical activity, heart rate, and sleep monitoring. By explorating those datasets,and the data frames we will be working also include:

* daily activity information
 
* daily sleep information

* weight log info information

## Goals of the case study

Our goals for the project are:

* Identify the trends in smart mobile usage

* Determine how those trends could apply to BugarBahagia products and customers

* Explore how those trends share influence to BugarBahagia’s marketing strategy
 
## Library Being Used

```{r}
library(tidyverse)
library(plotly)
library(scales)
library(glue)
library(lubridate)
library(hrbrthemes)
library(ggplot2)
library(ggcorrplot)
```

# Data Reading / CSV Loading {.tabset}
```{r}
setwd("c:/Users/ASUS/Documents/Algoritma/3_DV_LBB")
daily_activity <-  read.csv("dailyActivity_merged.csv") 
sleeping_day <- read.csv("sleepDay_merged.csv")
weight_info <- read.csv("weightLogInfo_merged.csv")
```

## The Daily Activities
```{r}
head(daily_activity) 
colnames(daily_activity) 
glimpse(daily_activity)
```

## The Daily Activities
```{r}
head(sleeping_day) 
colnames(sleeping_day) 
glimpse(sleeping_day)
```

## Weight Information
```{r}
head(sleeping_day) 
colnames(sleeping_day) 
glimpse(sleeping_day)
```

# Data Measurements {.tabset}

## Total Steps, Distance and Sedentary Minutes on each daily_activity
```{r}
daily_activity %>%
  select(TotalSteps,
         TotalDistance,
         SedentaryMinutes)%>%
  summary()
```
##  Sleep Records, Minutes Asleep and Time in Bed for sleep day
```{r}
sleeping_day %>%
  select(TotalSleepRecords,
         TotalMinutesAsleep,
         TotalTimeInBed)%>%
  summary()
```
##  BMI and weight informations
```{r}
weight_info %>%
  select(WeightPounds,
         BMI)%>%
  summary()
```

# Data Visualization - POV of Steps {.tabset}

## Total Steps Vs Calories Burned

We are assuming there were relationship between total steps taken in a day and calories burned. Likewise for sedentary minutes in a day compared to total steps. These assumptions exercised in this graph below:

```{r}
ggplot(data=daily_activity, aes(x=TotalSteps, y=Calories)) + geom_point(col = "darkgreen")+ stat_smooth(method=lm, col = "darkred") +
  labs(title = "Total Steps vs. Calories Burned",
       x= "Total Steps",
       y="Calories")+
theme_minimal()
```
As those assumptions being tested, the calories burned trends upward as the total number of steps increases. This would be a good opportunity for a marketing strategy. The more the subjects move, the more calories they burn!

## Total Steps Vs Sedentary Minutes

We are now trying to understand if there were relations between total steps and time being spent sedentary.

```{r}
ggplot(data=daily_activity, aes(x=TotalSteps, y=SedentaryMinutes)) + geom_point(col = "darkgreen") +
   stat_smooth(method=lm, col = "darkred") +
   labs(title = "Total Steps vs Sedentary Minutes",
      x= "Total Steps",
      y="Sedentary Minutes")+
theme_minimal()
```
Quite interesting that total steps isn’t very related to time spent sedentary. The startup we are helping actually could market their devices to notify their users  if they have been stationary for some period of time.


# Data Visualization - POV of Activity Intensity {.tabset}
**Is there any relationship between activity intensity and calories burned?**

We categorized three kinds of activity intensity; light, moderate and very active. Let’s test if very intense activity burns the most calories. We will plot each intensity category and see if there is a correlation between activity and calories.

## Light Active

```{r}
ggplot(data=daily_activity, aes(x=LightActiveDistance, y=Calories)) + geom_point(col = "navy") + stat_smooth(method=lm,col = "blue") +
  labs(title = "Calories Burned From Light Activity",
       x= "Light Activie Distance",
       y="Calories")+
theme_ipsum_tw()

```
**Then we are now identifying the relationship strength between light activity with calories being burned**
```{r}
cor(daily_activity$LightActiveDistance, daily_activity$Calories, method = "pearson")
```
## Moderate Active

```{r}
ggplot(data=daily_activity, aes(x=ModeratelyActiveDistance, y=Calories)) + geom_point(col = "navy") + stat_smooth(method=lm,col = "blue") +
  labs(title = "Calories Burned From Moderate Activity",
       x= "Moderate Activie Distance",
       y="Calories")+
theme_ipsum_tw()
```
**Then we are now identifying the relationship strength between moderate activity with calories being burned**
```{r}
cor(daily_activity$ModeratelyActiveDistance, daily_activity$Calories, method = "pearson")
```

## Intensely Active

```{r}
ggplot(data=daily_activity, aes(x=VeryActiveDistance, y=Calories)) + geom_point(col = "navy")+ stat_smooth(method=lm) +
  labs(title = "Calories Burned From Intense Activity",
       x= "Very Active Distance",
       y="Calories")+
theme_ipsum_tw()
```
**Then we are now identifying the relationship strength between high intensity activity with calories being burned**
```{r}
cor(daily_activity$VeryActiveDistance, daily_activity$Calories, method = "pearson")
```

## Summary
**Summary for the three levels of intensity**

The results are quite interesting. The very active distance had the highest correlation of 0.49. The second highest was actually the light active distance at a correlation of 0.46. Moderately active distance had the lowest correlation at .2167.

Since light active distance had a close correlation to very active, a marketing strategy could be focused around getting up and moving instead of focusing on high intensity workouts.

# Sleep and Bed Time 
You think the results should be obvious that sleep time and bed time are linear?? Check this out:
```{r}
ggplot(data=sleeping_day, aes(x=TotalMinutesAsleep, y=TotalTimeInBed)) + geom_point(col = "navy") + stat_smooth(method=lm) +
  labs(title = "Total Minutes Asleep vs. Total Time in Bed",
       x= "Total Minutes Asleep",
       y="Total Time in Bed")+
theme_light()
```
**See something?**
There are some outliers in the data. Some of the data points to people spending much more time in bed than time asleep. In other term, they are what we call **Mager** *:D

* **Mager** is Malas Gerak in Indonesia, people who love their beds soo much! :D

# Weight Vs Activity

Do people who weights more are less active?

## Merging the datasets
```{r}
combined_weight_act <- merge(weight_info, daily_activity, by="Id") 

n_distinct(combined_weight_act$Id)
```
there are 8 unique Id’s in the combined data set. This matches the total for weight_info.


## The Graph

**Weight compared to total steps taken**

```{r}
ggplot(data=combined_weight_act, aes(x=WeightPounds, y=TotalSteps)) + geom_point(col = "navy") +
  labs(title = "Weight vs. Total Steps",
       x= "Weight (lbs)",
       y="Total Steps") +
  theme_light()
```
```{r}
cor(combined_weight_act$WeightPounds, combined_weight_act$TotalSteps, method = "pearson")
```
There is a small correlation between weight and total steps **but it is not strong enough** to develop a marketing strategy around weight loss gimmick.
# Overall Relationships

```{r}
combined_weight_heat <- merge(combined_weight_act, sleeping_day, by="Id") 
head(combined_weight_heat)
```
```{r}
all <- combined_weight_heat %>% 
  select(WeightKg,BMI,TotalSteps,TotalDistance,TotalMinutesAsleep) 
ggcorrplot(cor(all),method = "circle",ggtheme = ggplot2::theme_minimal(),
           legend.title = "Corelation Strength",colors = c("blue","yellow", "darkgreen"))
```

# Summary
**Trends in smart device usage**
We saw that tracking steps, activity and calories burned were among the most popular metrics being tracked by users. Sleep was second most popular and only a few individuals tracked their weight.

We also saw that calories burned is related to total steps taken throughout the day. Typically, the higher the steps the more calories burned. Interestingly, the time spend sedentary was not inversely proportional to calories burned.

One important thing to note is that Fitbit does not track water intake.

# Knowledge

BugarBahagia can put more focus into activity and sleep tracking when it comes to products and marketing strategy. Users are interesting in tracking daily steps. Marketing this aspect of the products could be a good way to appeal to customers. Since even light activity was effective at burning calories, a marketing strategy could center around getting up and moving.

Since Fitbit does not track hydration or water intake, this provides a good opportunity to market the uniqueness of BugarBahagia’s to construct newproduct. Additional market analysis may be needed to see if other competitors are providing a hydration tracker.
